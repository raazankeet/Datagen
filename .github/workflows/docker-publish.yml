name: build-specs
on: push
jobs:
  load_config:
    runs-on: ubuntu-latest
    outputs:
      pgm_version: ${{ steps.load.outputs.version }}
    steps:
      - name: Checkout
        uses: actions/checkout@v3

      - name: Load the configuration
        id: load
        run: |
          echo version=`cat pom.xml  |grep  '<version>.*</version>'|head -2 | tail -1 |sed 's/<version>\(.*\)<\/version>/\1/'|tr -d '[:space:]'` >> $GITHUB_OUTPUT

  build-and-deploy:
    runs-on: ubuntu-latest
    needs: load_config
    env:
      PGM_VERSION: ${{ needs.load_config.outputs.pgm_version }}

    steps:
      
      - name: What version is this?
        run: |
          echo DocBook version ${{ env.PGM_VERSION }}
